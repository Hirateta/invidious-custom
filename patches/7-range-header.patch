From fe858211e382daa8acefc61bbfbc26a5925d521c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C3=89milien=20Devos?= <github@emiliendevos.be>
Date: Thu, 28 Apr 2022 09:48:19 +0000
Subject: [PATCH 1/1] use range query string instead of header

---
 assets/js/player.js | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/assets/js/player.js b/assets/js/player.js
index 6ddb1158..94e2c9a9 100644
--- a/assets/js/player.js
+++ b/assets/js/player.js
@@ -42,6 +42,12 @@ embed_url = location.origin + '/embed/' + video_data.id + embed_url.search;
 var save_player_pos_key = 'save_player_pos';
 
 videojs.Vhs.xhr.beforeRequest = function(options) {
+    if (options.headers){
+        if (options.headers.Range) {
+            options.uri = options.uri + '&range=' + options.headers.Range.split("=")[1];
+            delete options.headers.Range;
+        }
+    }
     if (options.uri.indexOf('videoplayback') === -1 && options.uri.indexOf('local=true') === -1) {
         options.uri = options.uri + '?local=true';
     }
-- 
2.35.1

